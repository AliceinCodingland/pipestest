<div ng-if="!selectedPipe">
	<div>Invalid Selection. No pipe is currently selected</div>
</div>

<div ng-show="!isPipeRunning() && !runningAnchor">
	<h1>
		Activity
	</h1>
	<p>
		A log of the IBM DataWorks activity, from Salesforce to IBM Cloudant to IBM dashDB. <a href="#">Check out the tutorial</a> for details.
	</p>

	<p>
		<button type="button" class="btn btn-primary" ng-click="runNow()">Run now</button>
	</p>

	<table class="table table-condensed table-hover" ng-show="runs && runs.length > 0">
		<thead>
			<tr>
				<th>Status</th>
				<th>Date/Time</th>
				<th>Records Processed</th>
				<th>Run Time</th>
				<th>Message</th>
				<th>Detail</th>
			</tr>
		</thead>
		<tbody>
			<tr ng-repeat="run in runs" ng-class="{success:true}">
				<td>{{run.status}}</td>
				<td>{{run.startTime}}</td>
				<td>{{run.numRecords}}</td>
				<td>{{run.elapsedTime}}</td>
				<td>{{run.message}}</td>
				<td>
					<span>
						<a href="" data-toggle="popover" class="basic-hovercard" data-placement="bottom" repeat-run-details-directive="runDetails">
							<strong>Details</strong>
							<div class="runDetails" style="display:none">
								<div style="height:400px;width=800px;overflow: auto">
									<table class="table table-condensed table-striped">
										<thead>
											<th align="center">Table Name</th>
											<th align="center">Records</th>
											<th align="center">Status</th>
										</thead>
										<tbody>
											<tr ng-repeat="stat in run.tableStats">
												<td>{{stat.tableName}}</td>
												<td>{{stat.numRecords}}</td>
												<td>{{stat.errors}}</td>
											</tr>
										</tbody>
									</table>
								</div>
							</div>
						</a>
					</span>
				</td>
			</tr>
		</tbody>
	</table>
</div>

<div ng-show="isPipeRunning() || runningAnchor" ng-model="currentRun">
	<div class="container-fluid">
		<div class="page-header">
	  		<div class="sidebar-title">Your pipe is running...</div>
		</div>

		<ol style="list-style:decimal;margin-left:30px">
			<li ng-repeat="step in steps">
				<span class="glyphicon glyphicon-ok-circle" ng-if="step.status==='FINISHED'"></span> {{step.label}}: <span style="color:green">{{step.message}}</span>
			</li>
		</ol>
		<a href="javascript:void(0)" ng-show="!isPipeRunning()" ng-click="runningAnchor=false;fetchRuns()">See Results</a>
	</div>
</div>
